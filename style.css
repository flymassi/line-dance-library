/* RESET + VARIABILI */
*{box-sizing:border-box}
:root{
  --bg-blur: rgba(0,0,0,.28);
  --card-bg: rgba(255,255,255,.86);
  --text-dim:#1f2937;
  --brand:#ff7a00;
  --pz-card-h: clamp(110px, 22vh, 170px);
}
.hidden{display:none!important}

body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#111}

/* BACKGROUND */
#bg-blur,#bg-main{position:fixed;inset:0;background-position:center;z-index:-2;pointer-events:none}
#bg-blur{background-size:cover;filter:blur(22px) brightness(.6);transform:scale(1.06)}
#bg-main{background-size:contain;transition:background-size .2s ease}
body.bg-light .hero h1,
body.bg-light .hero .count,
body.bg-light .footer{ text-shadow:0 1px 2px rgba(0,0,0,.6) }
body.bg-light .card-title{ text-shadow:0 1px 2px rgba(0,0,0,.4) }
body.bg-light .card-meta{  text-shadow:0 1px 2px rgba(0,0,0,.45) }

/* SPLASH */
.splash{position:fixed;inset:0;background:#000;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;z-index:9999}
.splash-img{max-width:min(420px,80vw);height:auto}
.hint{color:#fff;opacity:.9;margin:0}

/* UI */
.btn{border:0;border-radius:10px;padding:8px 12px;cursor:pointer;font-weight:700;display:inline-flex;align-items:center;gap:8px}
.btn-primary{background:var(--brand);color:#fff}
.btn-ghost{background:transparent;border:1px solid #fff;color:#fff}
.input{padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;min-width:min(300px,90vw);font-size:14px}

/* HEADER */
.hero{text-align:center;padding:14px 10px;color:#fff;background:var(--bg-blur);backdrop-filter:blur(4px)}
.hero h1{margin:0 0 6px;font-size:clamp(18px,3.2vw,26px);text-shadow:0 1px 2px rgba(0,0,0,.5)}
.count{opacity:.95;margin-bottom:6px}
.filters{display:flex;flex-wrap:wrap;gap:8px;justify-content:center}

/* LISTA */
.cards{max-width:860px;margin:12px auto;padding:0 10px;display:grid;gap:10px}
.card{
  background:rgba(255,255,255,.22);
  border:1px solid rgba(255,255,255,.28);
  border-radius:14px;
  backdrop-filter:saturate(180%) blur(16px);
  -webkit-backdrop-filter:saturate(180%) blur(16px);
  box-shadow:0 8px 26px rgba(0,0,0,.18);
  padding:10px 12px;
}
.card-row{display:flex;align-items:flex-start;justify-content:space-between;gap:10px}
.card-title{font-size:15px;font-weight:800;margin:0 0 2px}
.card-meta{color:var(--text-dim);font-size:12.5px;line-height:1.25}

.year-badge{flex:0 0 auto;align-self:flex-start;background:#111;color:#fff;border-radius:10px;padding:4px 8px;text-align:center;min-width:52px;display:flex;flex-direction:column;gap:2px}
.yb-label{font-size:10px;line-height:1;opacity:.85;letter-spacing:.2px;text-transform:uppercase}
.yb-num{font-size:13px;line-height:1;font-weight:800}

.card-cover{width:64px;height:64px;border-radius:8px;flex:0 0 64px;background:#eee;object-fit:cover;box-shadow:0 1px 4px rgba(0,0,0,.15);filter:blur(10px);opacity:.7;transition:filter .35s,opacity .35s}
.card-cover.is-ready{filter:blur(0);opacity:1}
.card-col{flex:1 1 auto;min-width:0}

.actions{display:flex;gap:8px;margin-top:8px}
.action{text-decoration:none;display:inline-block;padding:8px 10px;border-radius:10px;font-weight:800;border:2px solid var(--brand);color:var(--brand);background:#fff;font-size:13.5px;transition:.15s}
.action:hover{background:var(--brand);color:#fff}

.card.reveal{opacity:0;transform:translateY(12px) scale(.985);transition:opacity .5s,transform .5s}
.card.reveal.in{opacity:1;transform:translateY(0) scale(1)}
@media (prefers-reduced-motion:reduce){.card.reveal,.card.reveal.in{transition:none!important;transform:none!important;opacity:1!important}}

.footer{text-align:center;color:#ddd;padding:22px 0 30px;text-shadow:0 1px 2px rgba(0,0,0,.5)}

/* PUZZLE */
.pz{position:fixed;inset:0;background:rgba(0,0,0,.88);z-index:99999;display:none}
.pz.hidden{display:none}
.pz:not(.hidden){display:flex;align-items:center;justify-content:center}
.pz-wrap{position:relative;width:min(92vw,900px);height:min(85vh,720px)}

.pz-hud{position:absolute;top:8px;left:8px;right:8px;z-index:3;display:flex;align-items:center;justify-content:space-between;gap:8px}
.pz-info{background:rgba(0,0,0,.55);color:#fff;padding:6px 10px;border-radius:10px;font-weight:800;box-shadow:0 4px 12px rgba(0,0,0,.25)}
.pz-diff{display:flex;gap:6px}
.diff-btn{background:rgba(255,255,255,.85);color:#111;border:none;border-radius:10px;padding:6px 10px;font-weight:800;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.2)}
.diff-btn.active{background:var(--brand);color:#fff}

.pz-blur{position:absolute;top:0;left:0;right:0;bottom:var(--pz-card-h);background-size:cover;background-position:center;filter:blur(18px) brightness(.9);transform:scale(1.05);z-index:0}
.pz-img{position:absolute;top:0;left:0;right:0;bottom:var(--pz-card-h);width:100%;height:100%;object-fit:contain;background:#000;z-index:1}
.pz-grid{position:absolute;top:0;left:0;right:0;bottom:var(--pz-card-h);display:grid;gap:2px;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(4,1fr);z-index:2}
.pz-tile{background:#444;border:1px solid #222;border-radius:3px}
.pz-tile.revealed{background:transparent;border-color:transparent}

.pz-no{position:absolute;top:50%;left:50%;width:160px;transform:translate(-50%,-50%);filter:drop-shadow(0 6px 14px rgba(0,0,0,.6));animation:wobble .5s linear infinite alternate;z-index:3}
@keyframes wobble{from{transform:translate(-50%,-50%) rotate(-4deg)}to{transform:translate(-50%,-50%) rotate(4deg)}}

.pz-card{position:absolute;left:50%;transform:translateX(-50%);bottom:8px;width:min(92vw,900px);height:var(--pz-card-h);background:#fff;color:#111;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.25);padding:10px;z-index:2;display:flex;flex-direction:column;gap:6px}
.pz-q{font-weight:800;text-align:center;margin:0 4px 4px;font-size:14px}
.pz-answers{display:grid;grid-template-columns:1fr 1fr;gap:6px;overflow:auto}
.pz-answers .btn{background:var(--brand);color:#fff}
.pz-actions{text-align:center;margin-top:auto}

.pz-bravo{position:absolute;inset:0;background:rgba(0,0,0,.6);color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:4}
.pz-bravo.hidden{display:none}
.pz-bravo-msg{font-size:2rem;font-weight:900;margin-bottom:6px}
.pz-bravo-sub{opacity:.9}

.pz-close{position:absolute;top:8px;right:8px;z-index:4;width:36px;height:36px;border-radius:50%;border:none;cursor:pointer;font-size:20px;line-height:36px;background:rgba(255,255,255,.9);color:#111;box-shadow:0 4px 12px rgba(0,0,0,.25)}
.pz-close:hover{background:#fff}

.pz-img.pz-complete{animation:pzWinPulse 1000ms ease forwards}
@keyframes pzWinPulse{0%{transform:scale(1)}50%{transform:scale(1.02);filter:drop-shadow(0 10px 24px rgba(255,122,0,.4))}100%{transform:scale(1)}}
