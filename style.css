/* ==== base ==== */
*{box-sizing:border-box}
:root{
  --brand:#ff8a00;
  --brandText:#ffe7c7;
  --bg:#0b1820;
  --card:rgba(255,255,255,.07);
  --glass:rgba(255,255,255,.12);
  --text:#e8f0f6;
}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:var(--bg);
}

/* ==== background ==== */
.bg{position:fixed; inset:0; z-index:-2; background-position:center; background-size:cover}
.blur{filter:blur(3px) brightness(.9) saturate(115%); z-index:-2}
.main{z-index:-3}

/* ==== splash ==== */
.splash{
  position:fixed; inset:0; background:#000; display:grid; place-items:center;
  grid-template-rows:auto auto auto; gap:10px; z-index:10;
}
.splash-img{max-width:min(80vw,480px); width:80%; height:auto}
.splash-tip{margin:0;color:#ddd;opacity:.9}
.splash-start{margin-top:-40px}

.hidden{display:none !important}

/* ==== UI ==== */
.hero{padding:16px 12px 8px; text-align:center; backdrop-filter:blur(6px)}
.count{opacity:.85; margin-bottom:8px}
.filters{display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
.input{padding:10px 12px; border-radius:10px; border:0}
.btn{border:0; border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer}
.btn-primary{background:var(--brand); color:#fff}

/* bottone puzzle visivamente diverso */
.btn-puzzle{
  background: linear-gradient(180deg, #ffd86b, #ffb200);
  color:#fd0404; /* testo scuro per contrasto */
  box-shadow: 0 6px 20px rgba(81, 255, 0, 0.35);
}
.btn-puzzle:hover{ filter:brightness(1.05) }


.ghost{background:transparent; color:#fff; border:1px solid #fff3; padding:9px 12px}
.actions-top{display:flex; gap:10px; justify-content:center; margin:10px auto}

/* ==== cards ==== */
.cards{max-width:980px; margin:16px auto; padding:0 12px; display:grid; gap:16px}
.card{
  background:var(--glass);
  border-radius:18px;
  padding:16px;
  box-shadow:0 12px 38px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.08);
  backdrop-filter:blur(14px) saturate(150%);
}
.card-row{display:flex; gap:12px; align-items:center; justify-content:space-between}
.cover{width:60px;height:60px;border-radius:10px;object-fit:cover;background:#111}
.title{font-weight:800; letter-spacing:.2px}
.meta{opacity:.75; margin-top:4px}
.badges{display:flex; gap:8px; align-items:center}
.badge{background:#0008; color:#fff; padding:6px 10px; border-radius:999px; font-weight:800; font-size:.9rem}
.badge.year{background:#16232b}
.actions{display:flex; gap:8px; margin-top:12px; flex-wrap:wrap}
.action{display:inline-block; border:2px solid var(--brand); color:var(--brand); background:#fff;
  padding:8px 12px; border-radius:12px; font-weight:800; text-decoration:none}
.action:hover{background:var(--brand); color:#fff}

/* stato playlist */
.action.play-added{background:var(--brand); color:#fff; border-color:var(--brand)}

/* footer */
.footer{text-align:center; opacity:.5; padding:24px}

/* ==== Playlist modal ==== */
.overlay{position:fixed; inset:0; background:rgba(0,0,0,.55); backdrop-filter:blur(6px); display:grid; place-items:center; z-index:20}
.pl-card{width:min(92vw,720px); background:var(--glass); border-radius:16px; padding:16px; backdrop-filter:blur(14px) saturate(150%)}
.pl-top{display:flex; align-items:center; justify-content:space-between}
.gap8{display:flex; gap:8px}

/* ==== Puzzle ==== */
.pz-topbar{
  position:fixed; top:10px; left:50%; transform:translateX(-50%);
  display:flex; gap:10px; align-items:center; z-index:30;
}
.chip{background:var(--glass); padding:8px 10px; border-radius:999px; box-shadow:0 6px 20px #0006}
.chip-btn{background:#222c33; color:#fff; border:0; padding:6px 10px; border-radius:999px; margin-left:4px; cursor:pointer}
.chip-btn.active{background:var(--brand)}

/* ---- Puzzle stage: lascia spazio alla card Q/A in basso ---- */
.pz-stage{
  display:grid; place-items:center;
  min-height:60vh;
  padding-top:64px;
  /* PRIMA non c’era il padding-bottom sufficiente */
  padding-bottom: clamp(150px, 28vh, 240px);
}

.pz-img-wrap{position:relative; width:min(90vw,820px); aspect-ratio:4/3}
.pz-img-wrap img#pzImg{position:absolute; inset:0; width:100%; height:100%; object-fit:contain; z-index:1}
#pzGrid{position:absolute; inset:0; z-index:2; display:grid; gap:2px}

.pz-tile{
  /* PRIMA: background:#111d; molto trasparente */
  background: rgba(0, 4, 8, 0.92);
  border-radius:6px;
  box-shadow: inset 0 0 0 1px rgb(237, 234, 234);
}

.pz-tile.hit{animation:spinOut .5s ease forwards}
@keyframes spinOut{
  0%{transform:rotateY(0deg); opacity:1}
  49%{transform:rotateY(360deg); opacity:1}
  50%{transform:rotateY(360deg); opacity:.4}
  100%{transform:rotateY(720deg); opacity:0}
}
.no-img{position:absolute; inset:auto auto 4% 50%; transform:translateX(-50%); width:min(42vw,300px); z-index:3}
.no-img.shake{animation:shake .7s}
@keyframes shake{
  0%,100%{transform:translate(-50%,0)}
  20%{transform:translate(-50%,-8px) rotate(-4deg)}
  40%{transform:translate(-50%,6px) rotate(3deg)}
  60%{transform:translate(-50%,-4px) rotate(-2deg)}
  80%{transform:translate(-50%,2px) rotate(1deg)}
}

/* QA in basso */
.qa-card{
  position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
  width:min(96vw,980px);
  background:url('./assets/images/wood.png') center/cover;
  border-radius:16px;
  padding:14px;
  color:#fff; z-index:25; box-shadow:0 18px 60px #0008;
}
.qa-title{font-weight:900; margin:4px 6px 10px}
.qa-answers{display:grid; grid-template-columns:1fr 1fr; gap:10px}
.qa-answers .btn{background:#fff; color:#111; border-radius:12px}

/* puzzle bravo badge */
.bravo{
  position:fixed; inset:0; display:grid; place-items:center; z-index:26;
  background:rgba(0,0,0,.35); backdrop-filter:blur(4px);
  color:#fff; font-weight:900; font-size:clamp(22px,5vw,44px);
}
/* ---- HUD / Topbar e spazio puzzle ---- */
:root{
  --pz-topbar-h: 76px;     /* altezza indicativa della barra in alto */
}

/* la barra rimane visibile ma non schiaccia la griglia */
.pz-topbar{
  position: sticky;
  top: 12px;
  z-index: 50;
  display: flex; gap: 8px; align-items: center; justify-content: center;
  padding: 8px 10px;
  backdrop-filter: blur(10px) saturate(140%);
  background: linear-gradient(180deg, rgba(10,15,20,.65), rgba(10,15,20,.35));
  border-radius: 14px;
  color:#fff;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
}

/* più aria sopra la griglia così la prima fila NON sta sotto la topbar */
.pz-stage{
  display:grid; place-items:center;
  min-height:60vh;
  padding-top: calc(var(--pz-topbar-h) + 28px);
  padding-bottom: clamp(150px, 28vh, 240px); /* lascia spazio alla card Q/A in basso */
}

/* chip (timer, punteggio, difficoltà) più leggibili */
.chip, .chip-btn{
  color:#fff;
  text-shadow: 0 1px 2px rgba(0,0,0,.5);
}

/* card delle domande: testo più “staccato” dallo sfondo legno */
#pzCard{
  color:#fff;
  text-shadow: 0 1px 2px rgba(0,0,0,.6);
  border: 1px solid rgba(255,255,255,.12);
}
#pzAnswers .btn{
  color:#101318;
  font-weight: 800;
}
#pzAnswers .btn:hover{
  filter: brightness(1.05);
}

