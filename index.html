<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Western Spritz ‚Äî Line Dance Library</title>

  <!-- Icone / PWA -->
  <link rel="icon" href="./assets/images/icon.png" />
  <link rel="apple-touch-icon" href="./assets/images/icon.png" />
  <link rel="manifest" href="./manifest.webmanifest" />

  <!-- Stili -->
  <link rel="stylesheet" href="./style.css?v=30" />
</head>
<body>

  <!-- Background -->
  <div id="bg-blur" class="bg blur"></div>
  <div id="bg-main" class="bg main"></div>

  <!-- SPLASH -->
  <div id="splash" class="splash">
    <img src="./assets/images/gruppo.png" class="splash-img" alt="Western Spritz" />
    <p class="splash-tip">Tocca ‚ÄúAvvia‚Äù per entrare</p>
    <button id="startApp" class="btn btn-primary splash-start">Avvia</button>
    <audio id="introMusic" preload="auto">
      <source src="./assets/audio/some_people.mp3" type="audio/mpeg" />
    </audio>
  </div>

  <!-- Header -->
  <header class="hero">
    <h1>Western Spritz ‚Äî Line Dance Library</h1>
    <div id="count" class="count">Brani trovati: 0</div>

    <div class="filters">
      <input id="fDance" class="input" placeholder="Filtra per titolo del ballo‚Ä¶" />
      <input id="fSong"  class="input" placeholder="Filtra per titolo della canzone‚Ä¶" />
      <button id="clearFilters" class="btn ghost">Pulisci</button>
    </div>

    <div class="actions-top">
      <button id="btnUpdate" class="btn btn-primary">Aggiorna app</button>
      <button id="btnPuzzle" class="btn btn-puzzle">üéØ Gioco Puzzle</button>
      <button id="btnPlaylist" class="btn btn-primary">‚ñ∂Ô∏é Playlist</button>
    </div>
  </header>

  <!-- Cards -->
  <main id="cards" class="cards" aria-live="polite"></main>

  <footer class="footer">
    Western Spritz ‚Ä¢ Aggiungi l‚Äôapp alla Home per un‚Äôesperienza migliore
  </footer>

  <!-- Overlay: PLAYLIST -->
  <div id="plModal" class="overlay hidden" aria-hidden="true">
    <div class="pl-card">
      <div class="pl-top">
        <h3>Le mie playlist</h3>
        <div class="gap8">
          <button id="plClear" class="btn ghost">Svuota</button>
          <button id="plClose" class="btn ghost">Chiudi</button>
        </div>
      </div>
      <div id="plList"></div>
      <div class="actions" style="justify-content:flex-end; gap:8px">
          <button id="plPrev" class="btn ghost">‚óÄÔ∏é Precedente</button>
          <button id="plNext" class="btn ghost">Successivo ‚ñ∂Ô∏é</button>
          <button id="plPlay" class="btn btn-primary">Apri su YouTube</button>
      </div>
    </div>
  </div>

  <!-- Overlay: PUZZLE -->
  <div id="pzOverlay" class="overlay hidden" aria-hidden="true">
    <div class="pz-topbar">
      <button id="pzBack" class="chip">‚óÄÔ∏é Indietro</button>
      <div class="chip"><span>‚è±Ô∏è</span><span id="pzTime">00:00</span></div>
      <div class="chip"><span>‚≠ê</span><span id="pzScore">0</span></div>
      <div class="chip">Difficolt√†:
        <button class="chip-btn" data-diff="3">3√ó3</button>
        <button class="chip-btn active" data-diff="4">4√ó4</button>
        <button class="chip-btn" data-diff="5">5√ó5</button>
      </div>
      <button id="pzNext" class="chip">üì∑ Nuova foto</button>
      <button id="pzClose" class="chip">‚úï</button>
    </div>

    <div class="pz-stage">
      <div class="pz-img-wrap">
        <img id="pzImg" src="" alt="puzzle" />
        <div id="pzGrid"></div>
        <img id="noImg" class="no-img hidden" src="./assets/images/alessia.png" alt="No" />
      </div>
    </div>

    <div id="pzCard" class="qa-card">
      <div id="pzQuestion" class="qa-title">Domanda‚Ä¶</div>
      <div id="pzAnswers" class="qa-answers"></div>
    </div>

    <!-- suoni -->
    <audio id="fxOk" preload="auto"><source src="./assets/audio/correct.mp3" type="audio/mpeg" /></audio>
    <audio id="fxWrong" preload="auto"><source src="./assets/audio/wrong.mp3" type="audio/mpeg" /></audio>
    <audio id="fxGun" preload="auto"><source src="./assets/audio/gun_shot.mp3" type="audio/mpeg" /></audio>
    <audio id="fxWhip" preload="auto"><source src="./assets/audio/frusta.mp3" type="audio/mpeg" /></audio>
    <audio id="fxVictory" preload="auto"><source src="./assets/audio/vittoria.mp3" type="audio/mpeg" /></audio>
  </div>

  <!-- Script -->
  <script src="./app.js?v=30"></script>
  <script>
    if ('serviceWorker' in navigator){
      addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js?v=30').catch(()=>{});
      });
    }
  </script>
</body>
</html>
