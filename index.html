<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Western Spritz â€“ Line Dance Library</title>

  <!-- PWA / icone -->
  <link rel="manifest" href="/manifest.webmanifest">
  <link rel="apple-touch-icon" href="/assets/images/icon.png">
  <link rel="icon" type="image/png" href="/assets/images/icon.png">

  <link rel="stylesheet" href="./style.css" />
  <meta name="theme-color" content="#000000" />
</head>
<body>

  <!-- Splash iniziale -->
  <section id="splash" class="splash">
    <img src="./assets/images/gruppo.png" alt="Western Spritz" />
    <div class="hint">Tocca Avvia per entrare</div>
    <button id="startBtn" class="btn primary" onclick="window.startApp()">Avvia</button>
  </section>

  <!-- Audio principali -->
  <audio id="introMusic" src="./assets/audio/some_people.mp3" preload="auto"></audio>
  <audio id="sfx"        src="./assets/audio/frusta.mp3"       preload="auto"></audio>

  <header class="hero">
    <h1>Western Spritz â€“ Line Dance Library</h1>
    <div id="count" class="count">Brani trovati: 0</div>

    <div class="filters">
      <input id="fDance" class="input" placeholder="Filtra per titolo del balloâ€¦" />
      <input id="fSong"  class="input" placeholder="Filtra per titolo della canzoneâ€¦" />
      <label style="color:#fff; display:flex; align-items:center; gap:8px;">
        <input type="checkbox" id="onlyFavs" /> Solo preferiti
      </label>
      <button id="clearFilters" class="btn ghost">Pulisci</button>
    </div>

    <!-- Bottone per aprire il gioco -->
   
    <button id="openPuzzle" class="btn primary" style="margin-top:10px">ðŸŽ¯ Gioco Puzzle</button>
  </header>

  <main id="cards" class="cards" aria-live="polite"></main>

  <footer class="footer">
    Western Spritz â€¢ Aggiungi alla Home per unâ€™esperienza migliore
  </footer>

  <!-- Banner install (Android/Chrome) -->
  <div id="installBanner" class="install hidden">
    <span class="install-text">Installa lâ€™app sulla Home</span>
    <div class="install-actions">
      <button id="installBtn" class="btn primary">Installa</button>
      <button id="closeInstall" class="btn ghost">Chiudi</button>
    </div>
  </div>

  <!-- Suggerimento iOS (Safari) -->
  <div id="iosHint" class="install hidden">
    <span class="install-text">
      iPhone: apri <b>Condividi</b> â†’ <b>Aggiungi alla Home</b>
    </span>
    <button id="closeIos" class="btn ghost">Ok</button>
  </div>

  <!-- === PUZZLE QUIZ (overlay) === -->
  <section id="puzzleOverlay" class="pz hidden" aria-hidden="true">
    <div class="pz-wrap">
      <!-- Immagine puzzle -->
      <img id="pzImage" alt="Puzzle" class="pz-img" />
      <!-- Tasselli -->
      <div id="pzTiles" class="pz-tiles"></div>
      <!-- Alessia "no" -->
      <img id="pzNo" src="./assets/images/alessia.png" alt="No" class="pz-no hidden" />
      <!-- Scheda domanda -->
      <div class="pz-card">
        <div id="pzQuestion" class="pz-q">Domandaâ€¦</div>
        <div id="pzChoices" class="pz-choices"></div>
        <div class="pz-actions">
          <button id="pzQuit" class="btn ghost">Chiudi</button>
          <button id="pzNext" class="btn" disabled>Prossima domanda</button>
        </div>
      </div>
      <!-- Schermata finale -->
      <div id="pzBravo" class="pz-bravo hidden">
        <div class="pz-bravo-msg">BRAVO! ðŸŽ‰</div>
        <div class="pz-bravo-sub">Tocca per ricominciare</div>
      </div>
    </div>
  </section>

  <!-- Audio quiz -->
  <audio id="audioCorrect" src="./assets/audio/correct.mp3" preload="auto"></audio>
  <audio id="audioWrong"   src="./assets/audio/wrong.mp3"   preload="auto"></audio>

  <script src="./app.js"></script>
  <!-- Registra il SW con versione per forzare update -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js?v=22');
      });
    }
  </script>
</body>
</html>
